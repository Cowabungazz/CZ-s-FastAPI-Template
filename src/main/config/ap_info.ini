;=============================
; ap_info.ini — General Template
;=============================

;--------------------------------
; Defaults shared by all sections
;--------------------------------
[DEFAULT]
; App metadata
app_name                = MyApp
app_env                 = ${ENV:APP_ENV|development}   ; dev|staging|prod
app_version             = 1.0.0
timezone                = UTC

; Common toggles
debug                   = false                          ; true/false (lowercase)
log_level               = INFO                            ; DEBUG|INFO|WARN|ERROR
feature_flags           = feature_x,feature_y           ; comma-separated list

; Paths (use forward slashes; relative to project root unless absolute)
data_dir                = ./data
temp_dir                = ./tmp
log_dir                 = ./logs

; Network defaults
http_timeout_seconds    = 30
http_retries            = 3
http_backoff_seconds    = 2

; Security / secrets (prefer env or secret manager, not files)
; Replace with your mechanism; placeholders shown for illustration
secret_store            = env                           ; env|file|vault
api_key                 = ${ENV:API_KEY|}               ; empty default -> required in prod
db_password             = ${ENV:DB_PASSWORD|}

; Interpolation example (reuses log_dir from above)
access_log_path         = ${log_dir}/access.log


;-----------------
; Application Core
;-----------------
[App]
; Example strongly-typed options
workers                 = 4
max_tasks_in_flight     = 100
graceful_shutdown_sec   = 20

; Internationalization
default_locale          = en_US
supported_locales       = en_US,fr_FR,es_ES


;-------------
; Logging Sink
;-------------
[Logging]
; Inherit log_level from DEFAULT unless overridden
log_format              = %(asctime)s %(levelname)s %(name)s: %(message)s
rotate_daily            = true
max_bytes               = 10485760                      ; 10 MB
backup_count            = 7
destination             = file                          ; file|stdout|syslog
file_path               = ${access_log_path}            ; from DEFAULT interpolation


;---------
; Database
;---------
[Database]
engine                  = postgres                      ; postgres|mysql|sqlite
host                    = ${ENV:DB_HOST|localhost}
port                    = ${ENV:DB_PORT|5432}
name                    = ${ENV:DB_NAME|myapp}
user                    = ${ENV:DB_USER|myapp}
password                = ${db_password}                ; from DEFAULT
sslmode                 = require                       ; disable|require|verify-full
pool_min                = 1
pool_max                = 10
pool_timeout_seconds    = 15
conn_max_lifetime_sec   = 1800


;-------
; Cache
;-------
[Cache]
provider                = redis                         ; redis|memcached|inmemory
host                    = ${ENV:REDIS_HOST|localhost}
port                    = ${ENV:REDIS_PORT|6379}
db                      = 0
password                = ${ENV:REDIS_PASSWORD|}
default_ttl_seconds     = 300
enabled                 = true


;----------------------
; Outbound HTTP / APIs
;----------------------
[ExternalAPI.MainService]
base_url                = ${ENV:MAIN_API_URL|https://api.example.com}
auth_type               = bearer                        ; none|basic|bearer
token                   = ${ENV:MAIN_API_TOKEN|}
read_timeout_seconds    = ${http_timeout_seconds}       ; from DEFAULT
retry_count             = ${http_retries}

[ExternalAPI.Secondary]
base_url                = https://secondary.example.com
auth_type               = none
read_timeout_seconds    = 10
retry_count             = 1


;----------------
; Email & Messaging
;----------------
[Notifications]
provider                = smtp                          ; smtp|sendgrid|ses|none
smtp_host               = ${ENV:SMTP_HOST|localhost}
smtp_port               = ${ENV:SMTP_PORT|25}
smtp_user               = ${ENV:SMTP_USER|}
smtp_password           = ${ENV:SMTP_PASSWORD|}
from_address            = noreply@example.com
admin_recipients        = ops@example.com,alerts@example.com


;-----------------
; Job Scheduling
;-----------------
[Scheduler]
enabled                 = true
timezone                = ${timezone}
; Cron-like strings or ISO 8601 durations—use what your scheduler expects
; Examples:
; nightly_cleanup_cron  = 0 3 * * *
; metrics_interval_iso  = PT5M


;--------------------------
; Component-Specific Config
;--------------------------
[ComponentA]
; Replace the placeholders with actual values as needed
compA_enabled           = true
compA_endpoint          = ${ENV:COMP_A_ENDPOINT|https://a.service}
compA_variable          = ...                           ; your custom value
; Add any other A-specific keys
; variable               = ...

[ComponentB]
compB_enabled           = false
compB_threads           = 2
compB_mode              = safe                          ; safe|fast|custom
compB_variable          = ...


;-------------------------------
; Environment-Specific Overrides
;-------------------------------
; Put per-env overrides in the same file (below) or separate files like:
;   ap_info.development.ini, ap_info.staging.ini, ap_info.production.ini

[development]
; Section name doubles as an “environment profile”
; Many loaders don’t support profiles natively—merge this section at runtime if needed.
debug                   = true
log_level               = DEBUG
Database.host           = localhost                     ; dotted-keys: resolve to [Database]
ExternalAPI.MainService.base_url = http://localhost:8080

[staging]
log_level               = INFO
Database.pool_max       = 5

[production]
debug                   = false
log_level               = WARN
Cache.enabled           = true
Scheduler.enabled       = true
; Require real secrets via env/secret manager in prod
api_key                 =
db_password             =
